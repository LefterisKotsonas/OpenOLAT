#if($r.isNotEmpty($groupName))
	<h4><i class="o_icon o_icon_group"> </i> $r.escapeHtml($groupName)
		$r.render("mailto.group")</h4>
#elseif($r.visible("userInfos"))
	$r.render("userInfos")
#end	

<div class="o_process">
#if($assignmentEnabled)
<div class="o_step $assignmentCssClass o_expand_ctrl">
	<div class="o_bar"></div>
	<div class="o_step_block">
		<div class="o_header">
			<span class="o_process_status_badge $assignmentCssStatus">$assignmentStatus</span>
			<h4 class="o_title">$r.translate("run.assignment.title")</h4>
			#if($assignmentDueDateNew)
				<div class="o_meta_v2"><i class="o_icon o_icon-fw o_icon_timelimit"> </i> $assignmentDueDateNew</div>
			#end
			#if($r.isNotEmpty($assignmentDate))
				<div class="o_meta_v2"><i class="o_icon o_icon-fw o_icon_status_done"> </i> $assignmentDate</div>
			#end
			
			#if($r.isTrue($assignmentClosed) && $r.isFalse($assignmentClosedWithAssignment))
				<div class="o_meta_v2 o_expired_warning"><i class="o_icon o_icon-fw o_icon_status_done"> </i> $r.translate("error.assignment.closed.without.assignment")</div>
			#end
			
			#if($assignmentDueDateMsg)
				<div class="o_meta">$r.escapeHtml($assignmentDueDateMsg)</div>
			#end
		</div>
		<div id="o_step_assignement_content" class="o_content collapse #if($collapse_assignement) in #end" aria-expanded="$collapse_assignement" role="region">
		#if($r.available("assignedTask"))
			$r.render("assignedTask")
		#else
			<strong>$r.translate("coach.waiting.assignment")</strong>
			<br>
			$r.translate("coach.waiting.assignment.description")
		#end
		</div>
	</div>
	<div class="o_button_group">
	#if($collapse_assignement)
		<a href="javascript:;" onclick="$r.javaScriptCommand("hide","step","assignment")" data-toggle="collapse" aria-expanded="$collapse_assignement" class="btn btn-default o_button_details">
			<i class="o_icon o_icon_lg o_icon_details_collaps"> </i><span></span>
		</a>
	#else
		<a href="javascript:;" onclick="$r.javaScriptCommand("show","step","assignment")" data-toggle="collapse" aria-expanded="$collapse_assignement" class="btn btn-default o_button_details">
			<i class="o_icon o_icon_lg o_icon_details_expand"> </i><span></span>
		</a>
	#end
	</div>
</div>
#end

#if($submitEnabled)
<div class="o_step $submitCssClass o_expand_ctrl">
	<div class="o_bar"></div>
	<div class="o_step_block">
		<div class="o_header">
			<span class="o_process_status_badge $submitCssStatus">$submitStatus</span>
			<h4 class="o_title">$r.translate("run.submit")</h4>
			#if($r.isNotEmpty($submitDueDateNew))
				<div class="o_meta_v2"><i class="o_icon o_icon-fw o_icon_timelimit"> </i> $submitDueDateNew</div>
			#end
			#if($r.isNotEmpty($submissionDate))
				<div class="o_meta_v2"><i class="o_icon o_icon-fw o_icon_status_done"> </i> $submissionDate</div>
			#end
			#if($submitDueDateMsg)
				<div class="o_meta">$r.escapeHtml($submitDueDateMsg)</div>
			#end
		</div>
		<div id="o_step_submit_content" class="o_content collapse #if($collapse_submit) in #end" aria-expanded="$collapse_submit" role="region">
		#if($r.available("submittedDocs"))
			$r.render("submittedDocs")
		#else
			<strong>$r.translate("coach.waiting.submitted.documents")</strong>
			<br>
			#if($hasUploadedDocs)
				$r.translate("coach.waiting.submitted.documents.ready.description")
				#if($docsEdit)
					<div class="o_warning">
						$r.translate("coach.documents.editing")
					</div>
				#end
			#else 
				$r.translate("coach.waiting.submitted.documents.description")
			#end
		#end
		#if($r.available("coach.collect.task") && $r.visible("coach.collect.task"))
			<h5>$r.translate("coach.collect.confirm.title")</h5>
			<p>$r.translate("coach.collect.confirm.desc")</p>
			<div class="o_button_group">
				$r.render("coach.collect.task")
			</div>
		#end
		#if($r.available("coach.back.to.submission") && $r.visible("coach.back.to.submission"))
			<h5>$r.translate("coach.back.to.submission.confirm.title")</h5>
			<p>$r.translate("coach.back.to.submission.desc")</p>
			<div class="o_button_group">
				$r.render("coach.back.to.submission")
			</div>
		#end
		</div>
	</div>
	<div class="o_button_group">
	#if($collapse_submit)
		<a href="javascript:;" onclick="$r.javaScriptCommand("hide","step","submit")" data-toggle="collapse" aria-expanded="$collapse_submit" class="btn btn-default o_button_details">
			<i class="o_icon o_icon_lg o_icon_details_expand"> </i><span></span>
		</a>
	#else
		<a href="javascript:;" onclick="$r.javaScriptCommand("show","step","submit")" data-toggle="collapse" aria-expanded="$collapse_submit" class="btn btn-default o_button_details">
			<i class="o_icon o_icon_lg o_icon_details_collaps"> </i><span></span>
		</a>
	#end
	</div>
</div>
#end

#if($reviewAndCorrectionEnabled)
<div class="o_step $reviewCssClass o_step_review o_expand_ctrl">
	<div class="o_bar"></div>
	<div class="o_step_block">
		<div class="o_header">
			<span class="o_process_status_badge $reviewCssStatus">$reviewStatus</span>
			<h4 class="o_title">$r.translate("run.review")</h4>
		</div>
		<div id="o_step_review_content" class="o_content collapse #if($collapse_reviewAndCorrection) in #end" aria-expanded="$collapse_reviewAndCorrection" role="region">
		#if($r.isNotEmpty($correctionMessage))
			<div class="o_note">
				<h5>$r.translate("run.coach.corrections.comment")</strong> <small>$r.escapeHtml($correctionMessageInfos)</small></h5>
				<p>$r.xssScan($correctionMessage)</p>
			</div> 
		#end
		#if($r.available("corrections"))
			$r.render("corrections")
		#end
		</div>
	</div>
	<div class="o_button_group">
	#if($collapse_reviewAndCorrection)
		<a href="javascript:;" onclick="$r.javaScriptCommand("hide","step","reviewAndCorrection")" data-toggle="collapse" aria-expanded="$collapse_reviewAndCorrection" class="btn btn-default o_button_details">
			<i class="o_icon o_icon_lg o_icon_details_collaps"> </i><span></span>
		</a>
	#else
		<a href="javascript:;" onclick="$r.javaScriptCommand("show","step","reviewAndCorrection")" data-toggle="collapse" aria-expanded="$collapse_reviewAndCorrection" class="btn btn-default o_button_details">
			<i class="o_icon o_icon_lg o_icon_details_expand"> </i><span></span>
		</a>
	#end
	</div>
</div>
#end

#if($revisionEnabled  && !$skipRevisions)
<div class="o_step $revisionCssClass o_expand_ctrl">
	<div class="o_bar"></div>
	<div class="o_step_block">
		<div class="o_header">
			<span class="o_process_status_badge $revisionCssStatus">$revisionStatus</span>
			<h4 class="o_title">$r.translate("run.revision")</h4>
			#if($r.isNotEmpty($revisionDueDateNew))
				<div class="o_meta_v2"><i class="o_icon o_icon-fw o_icon_timelimit"> </i> $revisionDueDateNew</div>
			#end
			#if($r.isNotEmpty($submissionRevisionDate))
				<div class="o_meta_v2"><i class="o_icon o_icon-fw o_icon_status_done"> </i> $submissionRevisionDate</div>
			#end
		</div>
		<div id="o_step_revision_content" class="o_content collapse #if($collapse_revision) in #end" aria-expanded="$collapse_revision" role="region">
		#if($r.available("revisionDocs"))
			$r.render("revisionDocs")
		#end
		</div>
	</div>
	<div class="o_button_group">
	#if($collapse_revision)
		<a href="javascript:;" onclick="$r.javaScriptCommand("hide","step","revision")" data-toggle="collapse" aria-expanded="$collapse_revision" class="btn btn-default o_button_details">
			<i class="o_icon o_icon_lg o_icon_details_collaps"> </i><span></span>
		</a>
	#else
		<a href="javascript:;" onclick="$r.javaScriptCommand("show","step","revision")" data-toggle="collapse" aria-expanded="$collapse_revision" class="btn btn-default o_button_details">
			<i class="o_icon o_icon_lg o_icon_details_expand"> </i><span></span>
		</a>
	#end
	</div>
</div>
#end

#if($solutionEnabled)
<div class="o_step $solutionCssClass o_step_solution o_expand_ctrl">
	<div class="o_bar"></div>
	<div class="o_step_block">
		<div class="o_header">
			<span class="o_process_status_badge $solutionCssStatus">$solutionStatus</span>
			<h4 class="o_title">$r.translate("run.solution")</h4>
			#if($r.isNotEmpty($solutionAvailableDateNew))
				<div class="o_meta_v2"><i class="o_icon o_icon-fw o_icon_timelimit"> </i> $solutionAvailableDateNew</div>
			#end
			#if($solutionAvailableDateMsg)
				<div class="o_meta">$r.escapeHtml($solutionAvailableDateMsg)</div>
			#end
		</div>
		<div id="o_step_solution_content" class="o_content collapse #if($collapse_solution) in #end" aria-expanded="$collapse_solution" role="region">
		#if($r.available("solutions"))
			$r.render("solutions")
		#end
		</div>
	</div>
	<div class="o_button_group">
	#if($collapse_solution)
		<a href="javascript:;" onclick="$r.javaScriptCommand("hide","step","solution")" data-toggle="collapse" aria-expanded="$collapse_solution" class="btn btn-default o_button_details">
			<i class="o_icon o_icon_lg o_icon_details_collaps"> </i><span></span>
		</a>
	#else
		<a href="javascript:;" onclick="$r.javaScriptCommand("show","step","solution")" data-toggle="collapse" aria-expanded="$collapse_solution" class="btn btn-default o_button_details">
			<i class="o_icon o_icon_lg o_icon_details_expand"> </i><span></span>
		</a>
	#end
	</div>
</div>
#end
	
#if($gradingEnabled)
<div class="o_step o_step_grading $gradingCssClass o_expand_ctrl">
	<div class="o_bar"></div>
	<div class="o_step_block">
		<div class="o_header">
			<span class="o_process_status_badge $gradingCssStatus">$gradingStatus</span>
			<h4 class="o_title">$r.translate("run.grading")</h4>
		</div>
		<div id="o_step_grading_content" class="o_content collapse #if($collapse_grading) in #end" aria-expanded="$collapse_grading" role="region">
		#if($r.available("grading"))
			$r.render("grading")
		#end
		</div>
	</div>
	<div class="o_button_group">
	#if($collapse_grading)
		<a href="javascript:;" onclick="$r.javaScriptCommand("hide","step","grading")" data-toggle="collapse" aria-expanded="$collapse_grading" class="btn btn-default o_button_details">
			<i class="o_icon o_icon_lg #if($collapse_grading) o_icon_details_collaps #else o_icon_details_expand #end"> </i><span></span>
		</a>
	#else
		<a href="javascript:;" onclick="$r.javaScriptCommand("show","step","grading")" data-toggle="collapse" aria-expanded="$collapse_grading" class="btn btn-default o_button_details">
			<i class="o_icon o_icon_lg #if($collapse_grading) o_icon_details_collaps #else o_icon_details_expand #end"> </i><span></span>
		</a>
	#end
	</div>
</div>
#end

</div>	## end process

#if($r.visible("coach.reset.button"))
<div class="o_button_group">
	$r.render("coach.reset.button")
</div>
#end
#if($userLog || $groupLog)
<div class="o_box">
    #o_togglebox_start("o_course_run_log" $r.translate("log.title"))
	#if($groupLog)
    <pre class="small">$groupLog</pre>
    #end
    #if($userLog)
    <pre class="small">$userLog</pre>
    #end
    #o_togglebox_end()
</div>
#end